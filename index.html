<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ, –∫–æ—Ç–æ—Ä–æ–µ –≥–æ–≤–æ—Ä–∏—Ç –∑–∞ —Ç–µ–±—è. –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ. –ë–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –±–µ–∑ –ø–æ–¥–ø–∏—Å–æ–∫." />
  <style>
    :root {
      --bg: #f5f7fa;
      --card-bg: #ffffff;
      --primary: #2563eb;
      --text: #1f2d3a;
      --radius: 10px;
      --shadow: 0 20px 40px -10px rgba(31,45,58,.08);
      --transition: .3s cubic-bezier(.4,.2,.2,1);
      --font-stack: system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
      --max-width: 1120px;
    }
    *{box-sizing:border-box;}
    html{scroll-behavior:smooth;}
    body{
      margin:0;
      background: var(--bg);
      font-family: var(--font-stack);
      color: var(--text);
      -webkit-font-smoothing:antialiased;
      line-height:1.4;
      transition: background .3s,var(--transition);
    }
    a{color:var(--primary);text-decoration:none;}
    img{max-width:100%;display:block;border-radius:6px;}
    button{cursor:pointer;border:none;background:none;font:inherit;position:relative;overflow:hidden;padding:0;}
    button:focus{outline:2px solid rgba(37,99,235,.6);outline-offset:2px;}
    .container{max-width:var(--max-width);margin:0 auto;padding:0 16px;}
    .flex{display:flex;}
    .space-between{justify-content:space-between;}
    .center{display:flex;align-items:center;}
    .gap{gap:1rem;}
    h1{margin:0;font-size:2.2rem;font-weight:700;}
    h2{margin:0;font-size:1.4rem;font-weight:600;}
    p{margin:0 0 1em;font-size:1rem;}
    .small{font-size:.85rem;color:#556678;margin:0;}
    .btn-primary{
      background:var(--primary);
      color:#fff;
      padding:.65rem 1.2rem;
      border-radius:8px;
      font-weight:600;
      display:inline-flex;
      align-items:center;
      gap:.3rem;
      transition:var(--transition);
      border:0;
    }
    .btn-primary:hover{filter:brightness(1.05);}
    .btn-secondary{
      padding:.55rem 1rem;
      border-radius:8px;
      border:1px solid rgba(37,99,235,.5);
      font-weight:600;
      display:inline-flex;
      align-items:center;
      gap:.3rem;
      transition:var(--transition);
      background:#fff;
    }
    .btn-secondary:hover{background:rgba(37,99,235,.05);}
    .card{
      background:var(--card-bg);
      border-radius:var(--radius);
      padding:1rem 1.25rem;
      position:relative;
      overflow:hidden;
      box-shadow:var(--shadow);
      transition:transform .35s,var(--transition);
    }
    .card:hover{transform:translateY(-2px);}
    .inline-edit{
      outline:2px dashed transparent;
      transition:var(--transition);
      min-height:1.2em;
      display:inline-block;
      width:100%;
    }
    .inline-edit:focus{
      outline:2px dashed var(--primary);
      background:rgba(37,99,235,.04);
    }
    .template-filter{display:flex;gap:.5rem;flex-wrap:wrap;margin-bottom:8px;}
    .template-filter button{
      padding:.5rem 1rem;
      border-radius:999px;
      border:1px solid #d4d9e2;
      background:#fff;
      font-size:.75rem;
      font-weight:600;
      transition:var(--transition);
    }
    .template-filter button.active{
      background:var(--primary);
      color:#fff;
      border-color:var(--primary);
    }
    .template-card{
      position:relative;
      overflow:hidden;
      border-radius:12px;
      cursor:pointer;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      min-height:160px;
      transition:all .3s;
      border:2px solid transparent;
      padding:14px;
      flex:1;
      min-width:260px;
      background: #fff;
    }
    .template-card.selected{border-color:var(--primary);}
    .badge{
      background:var(--primary);
      color:#fff;
      padding:6px 14px;
      border-radius:999px;
      font-size:.65rem;
      display:inline-block;
      margin-bottom:6px;
    }
    .project-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:14px;
      margin-top:10px;
    }
    .project-card{
      background:var(--card-bg);
      border-radius:10px;
      position:relative;
      padding:12px;
      display:flex;
      flex-direction:column;
      gap:8px;
      box-shadow:0 18px 45px -8px rgba(31,45,58,.08);
    }
    .color-row{display:flex;gap:12px;flex-wrap:wrap;margin-top:6px;}
    .color-box{display:flex;flex-direction:column;gap:4px;}
    .footer{margin-top:60px;padding:50px 0;font-size:.8rem;color:#556678;}
    .footer .row{display:flex;flex-wrap:wrap;gap:30px;}
    .footer-col{flex:1;min-width:160px;}
    .indicator{
      position:fixed;
      top:14px;
      right:14px;
      background:rgba(37,99,235,.9);
      color:#fff;
      padding:10px 16px;
      border-radius:999px;
      font-size:.75rem;
      display:flex;
      align-items:center;
      gap:6px;
      box-shadow:0 30px 60px -10px rgba(31,45,58,.25);
      opacity:0;
      transform:translateY(-6px);
      transition:all .3s;
      z-index:100;
    }
    .show{opacity:1;transform:translateY(0);}
    .template-variant-classic .section{border-left:4px solid var(--primary);}
    .template-variant-minimal{--card-bg:transparent;}
    .template-variant-minimal .card{box-shadow:none;border:1px solid rgba(0,0,0,.05);}
    .template-variant-showcase .project-card{border:2px solid var(--primary);}
    .template-label{
      position:absolute;
      top:10px;
      left:10px;
      background:rgba(255,255,255,.95);
      padding:4px 10px;
      border-radius:6px;
      font-size:.55rem;
      font-weight:600;
      box-shadow:0 10px 30px -5px rgba(31,45,58,.1);
    }
    .preview-toggle{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap;}
    .preview-button{
      padding:6px 16px;
      border-radius:8px;
      border:1px solid #d4d9e2;
      background:#fff;
      font-size:.85rem;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:4px;
      transition:var(--transition);
      font-weight:600;
    }
    .preview-button.active{
      background:var(--primary);
      color:#fff;
      border-color:var(--primary);
    }
    .share-box{display:flex;gap:8px;flex-wrap:wrap;}
    @media (max-width: 1120px){
      .editor{display:block;}
      .panel{position:relative;top:0;max-height:none;margin-bottom:20px;}
      h1{font-size:2rem;}
    }
    .section{margin-bottom:18px;}
    .section-header{gap:8px;}
    .flex-wrap{display:flex;flex-wrap:wrap;gap:8px;}
    .inline-input{width:100%;padding:8px;border:1px solid #d4d9e2;border-radius:6px;font-size:.85rem;}
  </style>
</head>
<body>

  <div id="savedIndicator" class="indicator">–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ ‚úì</div>

  <!-- HEADER -->
  <header class="container" style="padding:20px 0;">
    <div class="flex space-between" style="flex-wrap:wrap;gap:12px;">
      <div class="center" style="gap:12px;flex-wrap:wrap;">
        <div style="font-weight:700;font-size:1.1rem;">InstantPortfolio</div>
        <div class="small">–ë–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏. –ë–µ–∑ –ø–æ–¥–ø–∏—Å–æ–∫. –°—Å—ã–ª–∫–∞ –≥–æ—Ç–æ–≤–∞ —Å—Ä–∞–∑—É.</div>
      </div>
      <div class="flex gap" style="flex-wrap:wrap;">
        <button class="btn-secondary" onclick="scrollToGallery()">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–∏–º–µ—Ä—ã</button>
        <button class="btn-primary" onclick="createDraft()">–°–æ–∑–¥–∞—Ç—å –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ</button>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="container" style="margin-top:8px;">
    <div class="flex" style="gap:40px;flex-wrap:wrap;">
      <div style="flex:1;min-width:260px;">
        <h1>–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ, –∫–æ—Ç–æ—Ä–æ–µ –≥–æ–≤–æ—Ä–∏—Ç –∑–∞ —Ç–µ–±—è. –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ.</h1>
        <p>–í—ã–±–µ—Ä–∏ —à–∞–±–ª–æ–Ω, –Ω–∞—Å—Ç—Ä–æ–π —Ü–≤–µ—Ç–∞, –¥–æ–±–∞–≤—å —Ñ–æ—Ç–æ –∏ —Å—Å—ã–ª–∫–∏ ‚Äî –ø–æ–¥–µ–ª–∏—Å—å. –ù–∏–∫–∞–∫–∏—Ö —Ñ–æ—Ä–º, –Ω–∏–∫–∞–∫–∏—Ö –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤.</p>
        <div class="flex gap" style="margin-top:14px;flex-wrap:wrap;">
          <button class="btn-primary" onclick="createDraft()">–ù–∞—á–∞—Ç—å —Å–µ–π—á–∞—Å</button>
          <button class="btn-secondary" onclick="scrollToGallery()">–®–∞–±–ª–æ–Ω—ã</button>
        </div>
        <div class="small" style="margin-top:10px;">–ì–æ—Å—Ç–µ–≤–æ–π –¥—Ä–∞—Ñ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ. –°—Å—ã–ª–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ.</div>
      </div>
      <div style="flex:1;min-width:260px;">
        <div class="card">
          <div class="flex" style="gap:12px;flex-wrap:wrap;">
            <div style="flex:1;min-width:160px;">
              <div style="background:rgba(37,99,235,.1);height:12px;width:70%;border-radius:5px;margin-bottom:8px;"></div>
              <div style="background:rgba(37,99,235,.05);height:10px;width:50%;border-radius:5px;margin-bottom:12px;"></div>
              <div class="flex" style="gap:8px;margin-top:6px;">
                <div style="background:#eef3fb;height:50px;flex:1;border-radius:6px;"></div>
                <div style="background:#eef3fb;height:50px;flex:1;border-radius:6px;"></div>
              </div>
            </div>
            <div style="width:100px;min-width:100px;">
              <div style="background:#f0f4f9;height:100px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:.8rem;color:#556678;">Preview</div>
            </div>
          </div>
          <div class="badge" style="position:absolute;top:12px;right:12px;">–ü—Ä–∏–º–µ—Ä</div>
        </div>
      </div>
    </div>
  </section>

  <!-- WHY IT WORKS -->
  <div class="container" style="margin-top:40px;">
    <div style="text-align:center;max-width:900px;margin:0 auto;">
      <h2>–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h2>
      <p class="small">–®–∞–±–ª–æ–Ω ‚Üí –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ ‚Üí —à–∞—Ä–∏–Ω–≥. –ë–µ–∑ –±–∞—Ä—å–µ—Ä–æ–≤.</p>
    </div>
    <div class="flex" style="margin-top:24px;gap:16px;flex-wrap:wrap;">
      <div class="card" style="flex:1;min-width:200px;">
        <div class="flex" style="gap:12px;">
          <div style="font-size:1.5rem;">‚ö°</div>
          <div>
            <div style="font-weight:600;">–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ</div>
            <div class="small">–ì–æ—Å—Ç–µ–≤–æ–π –¥—Ä–∞—Ñ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É.</div>
          </div>
        </div>
      </div>
      <div class="card" style="flex:1;min-width:200px;">
        <div class="flex" style="gap:12px;">
          <div style="font-size:1.5rem;">üé®</div>
          <div>
            <div style="font-weight:600;">–î–∏–∑–∞–π–Ω</div>
            <div class="small">–ö–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ —Ä–∞–∑–Ω—ã–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã.</div>
          </div>
        </div>
      </div>
      <div class="card" style="flex:1;min-width:200px;">
        <div class="flex" style="gap:12px;">
          <div style="font-size:1.5rem;">‚úèÔ∏è</div>
          <div>
            <div style="font-weight:600;">–ö–æ–Ω—Ç—Ä–æ–ª—å</div>
            <div class="small">–ò–∑–º–µ–Ω—è–π –≤—Å—ë –±–µ–∑ —Ñ–æ—Ä–º.</div>
          </div>
        </div>
      </div>
      <div class="card" style="flex:1;min-width:200px;">
        <div class="flex" style="gap:12px;">
          <div style="font-size:1.5rem;">üîó</div>
          <div>
            <div style="font-weight:600;">–®–∞—Ä–∏–Ω–≥</div>
            <div class="small">–°—Å—ã–ª–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- GALLERY -->
  <div id="gallery" class="container" style="margin-top:60px;">
    <div class="flex space-between" style="flex-wrap:wrap;gap:12px;">
      <div>
        <h2>–®–∞–±–ª–æ–Ω—ã</h2>
        <p class="small">–í—ã–±–µ—Ä–∏ —Å—Ç–∏–ª—å: –∫–ª–∞—Å—Å–∏–∫–∞, –º–∏–Ω–∏–º–∞–ª–∏–∑–º –∏–ª–∏ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ showcase.</p>
      </div>
      <div class="template-filter">
        <button data-filter="all" class="active" onclick="filterTemplates('all')">–í—Å–µ</button>
        <button data-filter="classic" onclick="filterTemplates('classic')">Classic</button>
        <button data-filter="minimal" onclick="filterTemplates('minimal')">Minimal</button>
        <button data-filter="showcase" onclick="filterTemplates('showcase')">Showcase</button>
      </div>
    </div>
    <div id="templates" class="flex" style="flex-wrap:wrap;gap:16px;margin-top:16px;">
      <div class="template-card" data-type="classic" id="tpl-classic" onclick="selectTemplate('classic')">
        <div class="template-label">Classic</div>
        <div style="font-weight:600;margin-bottom:6px;">–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–µ —Ä–µ–∑—é–º–µ</div>
        <div class="small">–§–æ–∫—É—Å –Ω–∞ —Ç–µ–∫—Å—Ç–µ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö.</div>
        <div style="margin-top:10px;">
          <button class="btn-secondary" onclick="event.stopPropagation(); selectTemplate('classic'); createDraft();">–í—ã–±—Ä–∞—Ç—å</button>
        </div>
      </div>
      <div class="template-card" data-type="minimal" id="tpl-minimal" onclick="selectTemplate('minimal')">
        <div class="template-label">Minimal</div>
        <div style="font-weight:600;margin-bottom:6px;">–ú–∏–Ω–∏–º–∞–ª–∏–∑–º</div>
        <div class="small">–ß–∏—Å—Ç–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –ø—Ä–æ—Å—Ç–∞—è —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞.</div>
        <div style="margin-top:10px;">
          <button class="btn-secondary" onclick="event.stopPropagation(); selectTemplate('minimal'); createDraft();">–í—ã–±—Ä–∞—Ç—å</button>
        </div>
      </div>
      <div class="template-card" data-type="showcase" id="tpl-showcase" onclick="selectTemplate('showcase')">
        <div class="template-label">Showcase</div>
        <div style="font-weight:600;margin-bottom:6px;">–í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ</div>
        <div class="small">–ö—Ä—É–ø–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∞–∫—Ü–µ–Ω—Ç—ã.</div>
        <div style="margin-top:10px;">
          <button class="btn-secondary" onclick="event.stopPropagation(); selectTemplate('showcase'); createDraft();">–í—ã–±—Ä–∞—Ç—å</button>
        </div>
      </div>
    </div>
  </div>

  <!-- EDITOR -->
  <div class="container" style="margin-top:50px;">
    <div class="editor">
      <!-- –ª–µ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
      <div class="panel" style="min-width:240px;max-width:360px;">
        <div class="flex-wrap" style="gap:10px;">
          <div>
            <div class="small" style="font-weight:600;">–†–µ–¥–∞–∫—Ç–æ—Ä</div>
          </div>
          <div style="display:flex;gap:8px;flex-wrap:wrap;">
            <button class="btn-secondary" onclick="undo()">‚Ü∫ Undo</button>
            <button class="btn-secondary" onclick="redo()">‚Üª Redo</button>
          </div>
        </div>

        <div style="margin-top:18px;">
          <div class="small" style="margin-bottom:6px;">–®–∞–±–ª–æ–Ω</div>
          <div style="display:flex;gap:8px;flex-wrap:wrap;">
            <button class="btn-secondary" onclick="selectTemplate('classic')">Classic</button>
            <button class="btn-secondary" onclick="selectTemplate('minimal')">Minimal</button>
            <button class="btn-secondary" onclick="selectTemplate('showcase')">Showcase</button>
          </div>
        </div>

        <div style="margin-top:18px;">
          <div class="small" style="margin-bottom:6px;">–¶–≤–µ—Ç–∞</div>
          <div class="color-row">
            <div class="color-box">
              <div class="small">–ê–∫—Ü–µ–Ω—Ç</div>
              <input type="color" id="primaryColor" value="#2563eb" aria-label="–û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç" onchange="updateColors()" />
            </div>
            <div class="color-box">
              <div class="small">–§–æ–Ω –∫–∞—Ä—Ç–æ—á–µ–∫</div>
              <input type="color" id="cardColor" value="#ffffff" aria-label="–§–æ–Ω –∫–∞—Ä—Ç–æ—á–µ–∫" onchange="updateColors()" />
            </div>
            <div class="color-box">
              <div class="small">–¢–µ–∫—Å—Ç</div>
              <input type="color" id="textColor" value="#1f2d3a" aria-label="–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞" onchange="updateColors()" />
            </div>
          </div>
        </div>

        <div style="margin-top:18px;">
          <div class="small" style="margin-bottom:6px;">SEO</div>
          <div style="display:flex;flex-direction:column;gap:8px;">
            <input type="text" id="seoTitle" placeholder="Title" class="inline-input" />
            <textarea id="seoDesc" rows="2" placeholder="Description" class="inline-input"></textarea>
          </div>
        </div>

        <div style="margin-top:18px;">
          <div class="small" style="margin-bottom:6px;">–ü—Ä–æ—Å–º–æ—Ç—Ä</div>
          <div class="preview-toggle">
            <div class="preview-button active" id="editModeBtn" onclick="setPreview(false)">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</div>
            <div class="preview-button" id="viewModeBtn" onclick="setPreview(true)">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å</div>
          </div>
        </div>

        <div style="margin-top:18px;">
          <div class="small" style="margin-bottom:6px;">–®–∞—Ä–∏–Ω–≥</div>
          <div class="share-box">
            <input type="text" id="shareLink" readonly style="flex:1;padding:8px;border:1px solid #d4d9e2;border-radius:6px;font-size:.85rem;" />
            <button class="btn-primary" onclick="copyLink()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
          </div>
          <div class="small" style="margin-top:4px;">–°—Å—ã–ª–∫–∞ –æ—Ç—Ä–∞–∂–∞–µ—Ç –≤—Å—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ.</div>
        </div>

        <div style="margin-top:18px;">
          <div class="small" style="margin-bottom:6px;">–≠–∫—Å–ø–æ—Ä—Ç</div>
          <button class="btn-secondary" onclick="downloadStatic()">–°–∫–∞—á–∞—Ç—å index.html</button>
          <div class="small" style="margin-top:4px;">–ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ.</div>
        </div>
      </div>

      <!-- canvas -->
      <div class="panel" style="flex:2;min-width:320px;">
        <div style="display:flex;justify-content:space-between;flex-wrap:wrap;gap:12px;">
          <div style="flex:1;min-width:220px;">
            <div contenteditable="true" class="inline-edit" id="title" style="font-size:1.8rem;font-weight:700;">–ò–º—è –§–∞–º–∏–ª–∏—è</div>
            <div contenteditable="true" class="inline-edit small" id="subtitle" style="margin-top:4px;">Frontend-–∏–Ω–∂–µ–Ω–µ—Ä</div>
          </div>
        </div>

        <div id="sectionsWrapper" style="margin-top:24px;">
          <!-- –û —Å–µ–±–µ -->
          <div class="section" data-key="about">
            <div class="section-header">
              <div>
                <div style="font-weight:600;">–û —Å–µ–±–µ</div>
                <div class="small">–ö–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ.</div>
              </div>
              <div class="section-controls" style="display:flex;gap:6px;">
                <button class="btn-secondary" onclick="removeSection('about')">–£–¥–∞–ª–∏—Ç—å</button>
                <button class="btn-secondary" onclick="duplicateSection('about')">–î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å</button>
              </div>
            </div>
            <div contenteditable="true" class="inline-edit" id="about" style="padding:12px;border:1px solid #d4d9e2;border-radius:8px;">
              –ü—Ä–∏–≤–µ—Ç! –Ø —Å–æ–∑–¥–∞—é –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ –±—ã—Å—Ç—Ä–æ –∏ –∫—Ä–∞—Å–∏–≤–æ. –î–æ–±–∞–≤–ª—è–π —Ñ–æ—Ç–æ, —Å—Å—ã–ª–∫–∏, –º–µ–Ω—è–π —Ü–≤–µ—Ç–∞.
            </div>
          </div>

          <!-- –ü—Ä–æ–µ–∫—Ç—ã -->
          <div class="section" data-key="projects">
            <div class="section-header">
              <div>
                <div style="font-weight:600;">–ü—Ä–æ–µ–∫—Ç—ã</div>
                <div class="small">–î–æ–±–∞–≤—å —Å–≤–æ–∏ —Ä–∞–±–æ—Ç—ã, —Ñ–æ—Ç–æ –∏ —Å—Å—ã–ª–∫–∏.</div>
              </div>
              <div class="section-controls" style="display:flex;gap:6px;">
                <button class="btn-secondary" onclick="removeSection('projects')">–£–¥–∞–ª–∏—Ç—å</button>
                <button class="btn-secondary" onclick="duplicateSection('projects')">–î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å</button>
              </div>
            </div>
            <div id="projects" class="project-grid"></div>
            <div style="margin-top:12px;">
              <button class="btn-secondary" onclick="addProject()">+ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç</button>
            </div>
          </div>

          <!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
          <div class="section" data-key="contacts">
            <div class="section-header">
              <div>
                <div style="font-weight:600;">–ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
                <div class="small">–ì–¥–µ —Ç–µ–±—è –Ω–∞–π—Ç–∏.</div>
              </div>
              <div class="section-controls" style="display:flex;gap:6px;">
                <button class="btn-secondary" onclick="removeSection('contacts')">–£–¥–∞–ª–∏—Ç—å</button>
                <button class="btn-secondary" onclick="duplicateSection('contacts')">–î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å</button>
              </div>
            </div>
            <div class="flex" style="gap:12px;flex-wrap:wrap;">
              <div style="flex:1;min-width:140px;">
                <div class="small">Email</div>
                <div contenteditable="true" class="inline-edit" id="contactEmail" style="padding:8px;border:1px solid #d4d9e2;border-radius:6px;">example@mail.com</div>
              </div>
              <div style="flex:1;min-width:140px;">
                <div class="small">GitHub</div>
                <div contenteditable="true" class="inline-edit" id="contactGithub" style="padding:8px;border:1px solid #d4d9e2;border-radius:6px;">github.com/username</div>
              </div>
              <div style="flex:1;min-width:140px;">
                <div class="small">Website</div>
                <div contenteditable="true" class="inline-edit" id="contactWebsite" style="padding:8px;border:1px solid #d4d9e2;border-radius:6px;">yourdomain.com</div>
              </div>
            </div>
          </div>
        </div>

        <div style="margin-top:14px;">
          <button class="btn-secondary" onclick="addSection()">+ –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é</button>
          <div class="small" style="margin-top:4px;">–ú–æ–∂–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å, —É–¥–∞–ª—è—Ç—å.</div>
        </div>
      </div>

      <!-- –ø—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å -->
      <div class="panel" style="min-width:220px;max-width:300px;">
        <div class="small" style="font-weight:600;margin-bottom:8px;">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</div>
        <div class="card" style="padding:14px;margin-bottom:12px;">
          <div class="small">–ú–æ–±–∏–ª—å–Ω—ã–π</div>
          <div style="margin-top:6px;font-size:.8rem;">(–≤–∏–∑—É–∞–ª—å–Ω—ã–π –º–∞—Ä–∫–µ—Ä, –ø–æ–∫–∞ —Å—Ç–∞—Ç–∏—á–Ω–æ)</div>
        </div>
        <div class="card" style="padding:14px;">
          <div class="small">–î–µ—Å–∫—Ç–æ–ø</div>
          <div style="margin-top:6px;font-size:.8rem;">(–≤–∏–∑—É–∞–ª—å–Ω—ã–π –º–∞—Ä–∫–µ—Ä, –ø–æ–∫–∞ —Å—Ç–∞—Ç–∏—á–Ω–æ)</div>
        </div>
      </div>
    </div>
  </div>

  <!-- –ö–µ–π—Å—ã -->
  <div class="container" style="margin-top:60px;">
    <div style="text-align:center;max-width:800px;margin:0 auto;">
      <h2>–ñ–∏–≤—ã–µ –∫–µ–π—Å—ã</h2>
      <p class="small">–ü—Ä–∏–º–µ—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –¥–µ–ª—è—Ç—Å—è –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ.</p>
    </div>
    <div class="flex" style="gap:16px;flex-wrap:wrap;margin-top:14px;">
      <div class="card" style="flex:1;min-width:250px;">
        <div style="font-weight:600;">Anna Ivanova</div>
        <div class="small">–§—Ä–∏–ª–∞–Ω—Å-–¥–∏–∑–∞–π–Ω–µ—Ä, UX/UI</div>
        <div style="margin-top:10px;"><button class="btn-secondary" onclick="alert('–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–º–µ—Ä Anna')">–û—Ç–∫—Ä—ã—Ç—å</button></div>
      </div>
      <div class="card" style="flex:1;min-width:250px;">
        <div style="font-weight:600;">Ivan Petrov</div>
        <div class="small">Frontend-–∏–Ω–∂–µ–Ω–µ—Ä</div>
        <div style="margin-top:10px;"><button class="btn-secondary" onclick="alert('–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–º–µ—Ä Ivan')">–û—Ç–∫—Ä—ã—Ç—å</button></div>
      </div>
      <div class="card" style="flex:1;min-width:250px;">
        <div style="font-weight:600;">Maria S.</div>
        <div class="small">–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ —Ä–µ–∑—é–º–µ</div>
        <div style="margin-top:10px;"><button class="btn-secondary" onclick="alert('–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–º–µ—Ä Maria')">–û—Ç–∫—Ä—ã—Ç—å</button></div>
      </div>
    </div>
  </div>

  <!-- –î–æ–≤–µ—Ä–∏–µ -->
  <div class="container" style="margin:60px 0;">
    <div class="card" style="display:flex;gap:24px;flex-wrap:wrap;">
      <div style="flex:1;min-width:220px;">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px;">
          <div style="font-size:1.7rem;">üõ°Ô∏è</div>
          <div>
            <div style="font-weight:600;">–ë–µ–∑ –ø–æ–¥–ø–∏—Å–æ–∫</div>
            <div class="small">–ù–∏–∫–∞–∫–∏—Ö email, –ø–ª–∞—Ç–µ–∂–µ–π –∏ —Å–∫—Ä—ã—Ç—ã—Ö —É—Å–ª–æ–≤–∏–π. –î–µ–ª–∏—Å—å —Å—Ä–∞–∑—É.</div>
          </div>
        </div>
        <div class="small">–õ–æ–∫–∞–ª—å–Ω—ã–µ –¥—Ä–∞—Ñ—Ç—ã, —ç–∫—Å–ø–æ—Ä—Ç, –∂–∏–≤—ã–µ —Å—Å—ã–ª–∫–∏.</div>
      </div>
      <div style="flex:1;min-width:220px;">
        <div class="small">–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏:</div>
        <ul style="margin-top:6px;padding-left:16px;">
          <li>Inline-—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</li>
          <li>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–≤–µ—Ç–æ–≤</li>
          <li>–§–æ—Ç–æ –∏ —Å—Å—ã–ª–∫–∏</li>
          <li>–†–∞–∑–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã</li>
          <li>–ü—É–±–ª–∏—á–Ω–∞—è —Å—Å—ã–ª–∫–∞</li>
          <li>–≠–∫—Å–ø–æ—Ä—Ç</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <div class="footer">
    <div class="container">
      <div class="row">
        <div class="footer-col">
          <div style="font-weight:700;margin-bottom:6px;">InstantPortfolio</div>
          <div class="small">–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ. –ë–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –±–µ–∑ –ø–æ–¥–ø–∏—Å–æ–∫.</div>
        </div>
        <div class="footer-col">
          <div style="font-weight:600;margin-bottom:6px;">–ù–∞–≤–∏–≥–∞—Ü–∏—è</div>
          <div><a class="link" href="#gallery">–®–∞–±–ª–æ–Ω—ã</a></div>
          <div><a class="link" href="javascript:void(0)">FAQ</a></div>
          <div><a class="link" href="javascript:void(0)">–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</a></div>
        </div>
        <div class="footer-col">
          <div style="font-weight:600;margin-bottom:6px;">–ü—Ä–∞–≤–æ</div>
          <div><a class="link" href="javascript:void(0)">–ü–æ–ª–∏—Ç–∏–∫–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏</a></div>
          <div><a class="link" href="javascript:void(0)">–£—Å–ª–æ–≤–∏—è</a></div>
        </div>
        <div class="footer-col">
          <div style="font-weight:600;margin-bottom:6px;">–ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
          <div class="small">support@instantportfolio.example</div>
        </div>
      </div>
      <div style="margin-top:30px;text-align:center;">
        <div class="small">&copy; <span id="footerYear"></span> InstantPortfolio. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</div>
      </div>
    </div>
  </div>

  <!-- –°–∂–∞—Ç–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è -->
  <script>
    const LZString = {
      compressToEncodedURIComponent: input => encodeURIComponent(btoa(unescape(encodeURIComponent(input)))),
      decompressFromEncodedURIComponent: input => { try{ return decodeURIComponent(escape(atob(decodeURIComponent(input)))); }catch{ return null; } }
    };
  </script>

  <!-- –õ–æ–≥–∏–∫–∞ -->
  <script>
    let state = {
      template: 'classic',
      colors: { primary: '#2563eb', card: '#ffffff', text: '#1f2d3a' },
      content: {
        title: '–ò–º—è –§–∞–º–∏–ª–∏—è',
        subtitle: 'Frontend-–∏–Ω–∂–µ–Ω–µ—Ä',
        about: '–ü—Ä–∏–≤–µ—Ç! –Ø –¥–µ–ª–∞—é –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ –±—ã—Å—Ç—Ä–æ. –î–æ–±–∞–≤–ª—è–π —Ñ–æ—Ç–æ, —Å—Å—ã–ª–∫–∏ –∏ –¥–µ–ª–∏—Å—å.',
        projects: [
          { name: '–ü—Ä–æ–µ–∫—Ç A', desc: '–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞', image: '', link: 'https://example.com' },
          { name: '–ü—Ä–æ–µ–∫—Ç B', desc: '–ï—â–µ –æ–¥–∏–Ω –∫–µ–π—Å', image: '', link: '' }
        ],
        contacts: { email: 'example@mail.com', github: 'github.com/username', website: 'yourdomain.com' },
        seo: { title: '', description: '' }
      }
    };
    let history = [], ptr = -1;
    const MAX_HISTORY = 50;
    let saveTimer = null;

    // Elements
    const titleEl = document.getElementById('title');
    const subtitleEl = document.getElementById('subtitle');
    const aboutEl = document.getElementById('about');
    const projectsEl = document.getElementById('projects');
    const shareLinkInput = document.getElementById('shareLink');
    const seoTitleEl = document.getElementById('seoTitle');
    const seoDescEl = document.getElementById('seoDesc');
    const indicator = document.getElementById('savedIndicator');
    const contactEmail = document.getElementById('contactEmail');
    const contactGithub = document.getElementById('contactGithub');
    const contactWebsite = document.getElementById('contactWebsite');
    const primaryColorInput = document.getElementById('primaryColor');
    const cardColorInput = document.getElementById('cardColor');
    const textColorInput = document.getElementById('textColor');
    const footerYear = document.getElementById('footerYear');
    const editModeBtn = document.getElementById('editModeBtn');
    const viewModeBtn = document.getElementById('viewModeBtn');

    function init(){
      footerYear.textContent = new Date().getFullYear();
      bindInline([titleEl, subtitleEl, aboutEl]);
      bindInlineContacts();
      seoTitleEl.addEventListener('input', scheduleSave);
      seoDescEl.addEventListener('input', scheduleSave);
      primaryColorInput.addEventListener('input', updateColors);
      cardColorInput.addEventListener('input', updateColors);
      textColorInput.addEventListener('input', updateColors);
      loadState();
      render();
      updateShareLink();
      setPreview(false);
    }

    function bindInline(arr){
      arr.forEach(el=>{
        el.addEventListener('input', scheduleSave);
        el.addEventListener('blur', applyFromDOM);
      });
    }
    function bindInlineContacts(){
      [contactEmail, contactGithub, contactWebsite].forEach(el=>{
        el.addEventListener('input', scheduleSave);
        el.addEventListener('blur', applyFromDOM);
      });
    }

    function scheduleSave(){
      if(saveTimer) clearTimeout(saveTimer);
      saveTimer = setTimeout(()=>{
        applyFromDOM();
        pushHistory();
        persist();
        render();
        updateShareLink();
        showSaved();
      }, 250);
    }

    function showSaved(){
      indicator.classList.add('show');
      setTimeout(()=>indicator.classList.remove('show'), 900);
    }

    function applyFromDOM(){
      state.content.title = titleEl.textContent.trim() || '–ò–º—è –§–∞–º–∏–ª–∏—è';
      state.content.subtitle = subtitleEl.textContent.trim() || 'Frontend-–∏–Ω–∂–µ–Ω–µ—Ä';
      state.content.about = aboutEl.textContent.trim();
      const projectCards = Array.from(document.querySelectorAll('.project-card'));
      state.content.projects = projectCards.map(card=>{
        const name = card.querySelector('.proj-name')?.textContent.trim()||'';
        const desc = card.querySelector('.proj-desc')?.textContent.trim()||'';
        const link = card.querySelector('.proj-link')?.textContent.trim()||'';
        const imgEl = card.querySelector('.proj-img');
        const image = imgEl ? (imgEl.getAttribute('data-src')||imgEl.src):'';
        return { name, desc, link, image };
      });
      state.content.contacts.email = contactEmail.textContent.replace(/^Email:\s*/i,'').trim();
      state.content.contacts.github = contactGithub.textContent.replace(/^GitHub:\s*/i,'').trim();
      state.content.contacts.website = contactWebsite.textContent.trim();
      state.content.seo.title = seoTitleEl.value;
      state.content.seo.description = seoDescEl.value;
    }

    function pushHistory(){
      const snap = JSON.stringify(state);
      if(ptr >=0 && history[ptr] === snap) return;
      history = history.slice(0, ptr+1);
      history.push(snap);
      if(history.length > MAX_HISTORY) history.shift();
      ptr = history.length -1;
    }

    function undo(){ if(ptr>0){ ptr--; state=JSON.parse(history[ptr]); render(); persist(); updateShareLink(); } }
    function redo(){ if(ptr < history.length-1){ ptr++; state=JSON.parse(history[ptr]); render(); persist(); updateShareLink(); } }

    function persist(){ try{ localStorage.setItem('instant_portfolio_draft', JSON.stringify(state)); }catch{} }
    function loadState(){
      const hash = location.hash.slice(1);
      if(hash.startsWith('s=')){
        const compressed = hash.slice(2);
        try{
          const raw = LZString.decompressFromEncodedURIComponent(compressed);
          if(raw) state = JSON.parse(raw);
        }catch{}
      } else {
        try{
          const saved = localStorage.getItem('instant_portfolio_draft');
          if(saved) state = JSON.parse(saved);
        }catch{}
      }
      pushHistory();
    }

    function render(){
      titleEl.textContent = state.content.title;
      subtitleEl.textContent = state.content.subtitle;
      aboutEl.textContent = state.content.about;
      seoTitleEl.value = state.content.seo.title;
      seoDescEl.value = state.content.seo.description;
      contactEmail.textContent = 'Email: ' + state.content.contacts.email;
      contactGithub.textContent = 'GitHub: ' + state.content.contacts.github;
      contactWebsite.textContent = state.content.contacts.website;

      document.documentElement.style.setProperty('--primary', state.colors.primary);
      document.documentElement.style.setProperty('--card-bg', state.colors.card);
      document.documentElement.style.setProperty('--text', state.colors.text);
      primaryColorInput.value = state.colors.primary;
      cardColorInput.value = state.colors.card;
      textColorInput.value = state.colors.text;

      renderProjects();
      highlightTemplate();
    }

    function updateColors(){
      state.colors.primary = primaryColorInput.value;
      state.colors.card = cardColorInput.value;
      state.colors.text = textColorInput.value;
      render();
      scheduleSave();
    }

    function renderProjects(){
      projectsEl.innerHTML = '';
      state.content.projects.forEach((p,i)=>{
        const card = document.createElement('div');
        card.className = 'project-card';
        card.innerHTML = `
          <div contenteditable="true" class="proj-name" style="font-weight:600;">${escapeHTML(p.name)}</div>
          <div contenteditable="true" class="proj-desc small" style="margin-top:4px;">${escapeHTML(p.desc)}</div>
          <div contenteditable="true" class="proj-link link-style" style="margin-top:4px;">${escapeHTML(p.link)}</div>
          <div style="margin-top:8px;">
            <label style="font-size:.7rem;">–§–æ—Ç–æ: <input type="file" accept="image/*" onchange="handleProjectImage(event, ${i})" /></label>
            <div class="photo-thumb-wrapper" style="margin-top:6px;">
              ${p.image ? `<img class="proj-img photo-thumb" data-src="${escapeHTML(p.image)}" src="${escapeHTML(p.image)}" alt="–§–æ—Ç–æ –ø—Ä–æ–µ–∫—Ç–∞" />` : ''}
            </div>
          </div>
          <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap;">
            <button class="btn-secondary" onclick="removeProject(${i})">–£–¥–∞–ª–∏—Ç—å</button>
          </div>
        `;
        card.querySelectorAll('[contenteditable]').forEach(el=>{
          el.addEventListener('input', scheduleSave);
          el.addEventListener('blur', applyFromDOM);
        });
        projectsEl.appendChild(card);
      });
    }

    function handleProjectImage(e,index){
      const file = e.target.files[0];
      if(!file) return;
      const reader = new FileReader();
      reader.onload = function(ev){
        state.content.projects[index].image = ev.target.result;
        scheduleSave();
      };
      reader.readAsDataURL(file);
    }

    function addProject(){
      state.content.projects.push({ name: '–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç', desc: '–û–ø–∏—Å–∞–Ω–∏–µ', image: '', link: '' });
      pushHistory();
      render();
      persist();
      updateShareLink();
    }

    function removeProject(i){
      state.content.projects.splice(i,1);
      pushHistory();
      render();
      persist();
      updateShareLink();
    }

    function selectTemplate(name){
      state.template = name;
      highlightTemplate();
      scheduleSave();
    }

    function highlightTemplate(){
      ['classic','minimal','showcase'].forEach(t=>{
        const el = document.getElementById('tpl-' + t);
        if(!el) return;
        if(state.template===t) el.classList.add('selected');
        else el.classList.remove('selected');
      });
      document.body.classList.remove('template-variant-classic','template-variant-minimal','template-variant-showcase');
      if(state.template==='classic') document.body.classList.add('template-variant-classic');
      if(state.template==='minimal') document.body.classList.add('template-variant-minimal');
      if(state.template==='showcase') document.body.classList.add('template-variant-showcase');
    }

    function updateShareLink(){
      const s = LZString.compressToEncodedURIComponent(JSON.stringify(state));
      const url = `${location.origin}${location.pathname}#s=${s}`;
      shareLinkInput.value = url;
    }

    function copyLink(){
      shareLinkInput.select();
      shareLinkInput.setSelectionRange(0,99999);
      navigator.clipboard.writeText(shareLinkInput.value).then(()=>alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞'));
    }

    function createDraft(){
      updateShareLink();
      titleEl.focus();
      window.scrollTo({ top: 300, behavior: 'smooth' });
    }

    function scrollToGallery(){
      document.getElementById('gallery').scrollIntoView({behavior:'smooth'});
    }

    function downloadStatic(){
      applyFromDOM();
      const html = generateStaticHTML();
      const blob = new Blob([html], { type: 'text/html' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'portfolio.html';
      a.click();
    }

    function generateStaticHTML(){
      const safe = s=> (s||'').replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
      const title = safe(state.content.title);
      const subtitle = safe(state.content.subtitle);
      const about = safe(state.content.about);
      const email = safe(state.content.contacts.email);
      const github = safe(state.content.contacts.github);
      const website = safe(state.content.contacts.website);
      const seoTitle = safe(state.content.seo.title || title + ' ‚Äî –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ');
      const seoDesc = safe(state.content.seo.description || subtitle);
      const accent = state.colors.primary;
      const cardBg = state.colors.card;
      const textColor = state.colors.text;
      const projectsHTML = state.content.projects.map(p=>{
        const name = safe(p.name);
        const desc = safe(p.desc);
        const link = safe(p.link);
        const imgTag = p.image ? `<div style="margin-top:8px;"><img src="${p.image}" alt="${name}" style="border-radius:6px;max-width:100%;"></div>` : '';
        const linkHtml = link ? `<div style="margin-top:4px;"><a href="${link}" target="_blank">${link}</a></div>` : '';
        return `
          <div style="background:${cardBg};border-radius:8px;padding:14px;margin-bottom:14px;box-shadow:0 25px 50px -10px rgba(31,45,58,.08);">
            <div style="font-weight:600;font-size:1rem;">${name}</div>
            <div style="margin-top:6px;color:#555;">${desc}</div>
            ${imgTag}
            ${linkHtml}
          </div>
        `;
      }).join('');
      return `
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>${seoTitle}</title>
  <meta name="description" content="${seoDesc}" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --primary:${accent};
      --card-bg:${cardBg};
      --text:${textColor};
      font-family: system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
      background:#f5f7fa;
      color: var(--text);
    }
    *{box-sizing:border-box;}
    body{margin:0;padding:0;}
    .container{max-width:900px;margin:0 auto;padding:40px 16px;}
    h1{margin:0;font-size:2.2rem;font-weight:700;}
    .small{font-size:.9rem;color:#555;margin-top:6px;}
    .card{background:var(--card-bg);border-radius:10px;padding:16px;box-shadow:0 30px 60px -10px rgba(31,45,58,.08);margin-bottom:16px;}
    a{color:var(--primary);text-decoration:none;}
    .projects{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;margin-top:8px;}
    .badge{background:var(--primary);color:#fff;padding:6px 14px;border-radius:999px;font-size:.8rem;display:inline-block;margin-bottom:8px;font-weight:600;}
    body{background:#fff;}
  </style>
</head>
<body>
  <div class="container">
    <div style="margin-bottom:16px;">
      <div style="font-size:.85rem;color:#777;">–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ</div>
      <h1>${title}</h1>
      <div style="margin-top:4px;font-size:1rem;color:#555;">${subtitle}</div>
    </div>
    <div class="card">
      <div class="badge">–û —Å–µ–±–µ</div>
      <div class="small">${about}</div>
    </div>
    <div class="card">
      <div class="badge">–ü—Ä–æ–µ–∫—Ç—ã</div>
      <div class="projects">
        ${projectsHTML}
      </div>
    </div>
    <div class="card">
      <div class="badge">–ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
      <div class="small">Email: ${email}</div>
      <div class="small">GitHub: ${github}</div>
      <div class="small">Website: ${website}</div>
    </div>
    <div style="margin-top:40px;font-size:.8rem;color:#888;text-align:center;">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é InstantPortfolio. –ë–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.</div>
  </div>
</body>
</html>`;
    }

    function escapeHTML(str){ return (str||'').replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

    function filterTemplates(type){
      document.querySelectorAll('.template-filter button').forEach(b=>b.classList.remove('active'));
      document.querySelector(`.template-filter button[data-filter="${type}"]`)?.classList.add('active');
      document.querySelectorAll('#templates .template-card').forEach(card=>{
        if(type==='all') card.style.display='flex';
        else card.style.display = card.getAttribute('data-type')===type ? 'flex' : 'none';
      });
    }

    function addSection(){
      const key = prompt('–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å–µ–∫—Ü–∏–∏ (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)')?.trim();
      if(!key) return;
      if(document.querySelector(`.section[data-key="${key}"]`)){
        alert('–°–µ–∫—Ü–∏—è —É–∂–µ –µ—Å—Ç—å');
        return;
      }
      const wrapper = document.getElementById('sectionsWrapper');
      const newSection = document.createElement('div');
      newSection.className='section';
      newSection.setAttribute('data-key', key);
      newSection.innerHTML=`
        <div class="section-header">
          <div>
            <div style="font-weight:600;">${key}</div>
            <div class="small">–ù–æ–≤–∞—è —Å–µ–∫—Ü–∏—è</div>
          </div>
          <div class="section-controls" style="display:flex;gap:6px;">
            <button class="btn-secondary" onclick="removeSection('${key}')">–£–¥–∞–ª–∏—Ç—å</button>
            <button class="btn-secondary" onclick="duplicateSection('${key}')">–î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å</button>
          </div>
        </div>
        <div contenteditable="true" class="inline-edit" style="padding:12px;border:1px solid #d4d9e2;border-radius:8px;">–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–µ–∫—Ü–∏–∏ ${key}</div>
      `;
      wrapper.appendChild(newSection);
      newSection.querySelectorAll('[contenteditable]').forEach(el=>{
        el.addEventListener('input', scheduleSave);
        el.addEventListener('blur', applyFromDOM);
      });
      scheduleSave();
    }

    function removeSection(key){
      if(!confirm('–£–¥–∞–ª–∏—Ç—å —Å–µ–∫—Ü–∏—é?')) return;
      const el = document.querySelector(`.section[data-key="${key}"]`);
      if(el) el.remove();
      scheduleSave();
    }

    function duplicateSection(key){
      const src = document.querySelector(`.section[data-key="${key}"]`);
      if(!src) return;
      const clone = src.cloneNode(true);
      const newKey = key + '_copy_' + Math.floor(Math.random()*100);
      clone.setAttribute('data-key', newKey);
      const titleElem = clone.querySelector('[style*="font-weight:600;"]');
      if(titleElem) titleElem.textContent = newKey;
      document.getElementById('sectionsWrapper').appendChild(clone);
      clone.querySelectorAll('[contenteditable]').forEach(el=>{
        el.addEventListener('input', scheduleSave);
        el.addEventListener('blur', applyFromDOM);
      });
      scheduleSave();
    }

    function setPreview(viewer){
      if(viewer){
        document.querySelectorAll('.inline-edit').forEach(e=> e.setAttribute('contenteditable','false'));
        document.querySelectorAll('.section-controls').forEach(c=> c.style.display='none');
        editModeBtn.classList.remove('active');
        viewModeBtn.classList.add('active');
      } else {
        document.querySelectorAll('.inline-edit').forEach(e=> e.setAttribute('contenteditable','true'));
        document.querySelectorAll('.section-controls').forEach(c=> c.style.display='flex');
        editModeBtn.classList.add('active');
        viewModeBtn.classList.remove('active');
      }
    }

    window.addEventListener('load', init);
    window.addEventListener('hashchange', ()=>{
      loadState();
      render();
      updateShareLink();
    });
  </script>
</body>
</html>

